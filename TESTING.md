# 测试指南

本文档说明如何测试 Hover-Fill Sidebar 扩展。

## 前置条件

- Node.js 21.1.0 或更高版本
- Chrome 浏览器（最新版本）
- 项目已构建（运行 `npm run build`）

## 安装扩展

1. **打开 Chrome 扩展管理页面**
   - 在 Chrome 地址栏输入：`chrome://extensions/`
   - 或点击菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 在右上角找到"开发者模式"开关
   - 点击启用

3. **加载已解压的扩展**
   - 点击"加载已解压的扩展程序"按钮
   - 选择项目目录下的 `dist` 文件夹
   - 点击"选择文件夹"

4. **验证安装**
   - 扩展应该出现在扩展列表中
   - 状态应该显示为"已启用"

## 功能测试

### 测试 1：配置预设值

**步骤：**
1. 在扩展列表中找到"Hover-Fill Sidebar"
2. 点击"选项"按钮（或右键点击扩展图标 → 选项）
3. 在打开的选项页面中：
   - 标签输入框输入：`我的邮箱`
   - 值输入框输入：`test@example.com`
   - 点击"添加"按钮

**预期结果：**
- 页面显示成功消息
- 新的预设值出现在下方列表中
- 列表项显示标签和值

**测试 2：编辑预设值**

**步骤：**
1. 在已保存的预设值列表中找到刚添加的项
2. 点击"编辑"按钮
3. 修改标签为：`工作邮箱`
4. 点击"添加"按钮

**预期结果：**
- 列表中的项目已更新
- 显示成功消息

**测试 3：删除预设值**

**步骤：**
1. 在列表中找到一个预设值
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"

**预期结果：**
- 预设值从列表中移除
- 显示成功消息

### 测试 4：侧边栏显示

**步骤：**
1. 打开任何网页（例如 `example.com`）
2. 将鼠标移动到浏览器窗口的**最右侧边缘**
3. 观察侧边栏的行为

**预期结果：**
- 侧边栏从右侧滑出
- 显示"📋 预设值"标题
- 列出所有已保存的预设值
- 鼠标离开侧边栏时，侧边栏滑回

### 测试 5：自动填充功能

**步骤：**
1. 打开一个包含文本输入框的网页
   - 可以使用 `example.com` 或任何表单页面
   - 或创建一个简单的 HTML 文件：
     ```html
     <!DOCTYPE html>
     <html>
     <body>
       <input type="text" placeholder="输入邮箱">
       <input type="text" placeholder="输入用户名">
     </body>
     </html>
     ```

2. 点击一个输入框使其获得焦点（有光标）
3. 将鼠标移动到浏览器右侧边缘，调出侧边栏
4. 将鼠标悬停在一个预设值上，**保持 1 秒**
5. 观察输入框

**预期结果：**
- 1 秒后，预设值自动填充到输入框中
- 输入框保持焦点
- 侧边栏仍然可见

### 测试 6：快速划过不触发填充

**步骤：**
1. 打开一个包含输入框的网页
2. 点击输入框使其获得焦点
3. 调出侧边栏
4. 快速将鼠标划过预设值（不停留）

**预期结果：**
- 输入框不会被填充
- 预设值行没有被激活

### 测试 7：多框架兼容性

**测试 React 表单：**
1. 访问一个 React 应用（例如 `create-react-app` 创建的应用）
2. 在表单输入框中测试填充功能
3. 验证 React 能够正确检测到值的变化

**测试 Vue 表单：**
1. 访问一个 Vue 应用
2. 在表单输入框中测试填充功能
3. 验证 Vue 能够正确检测到值的变化

**预期结果：**
- 填充功能在两种框架中都能正常工作
- 框架能够正确更新其内部状态

### 测试 8：样式隔离

**步骤：**
1. 打开一个有复杂 CSS 的网页
2. 调出侧边栏
3. 观察侧边栏的样式

**预期结果：**
- 侧边栏样式不受网页 CSS 影响
- 侧边栏显示正常，没有样式混乱

### 测试 9：多页面测试

**步骤：**
1. 打开多个标签页
2. 在每个标签页中测试侧边栏功能
3. 在不同标签页之间切换

**预期结果：**
- 每个标签页都能独立使用侧边栏
- 预设值在所有标签页中保持一致

### 测试 10：数据持久化

**步骤：**
1. 添加几个预设值
2. 关闭选项页面
3. 重新打开选项页面
4. 刷新网页

**预期结果：**
- 预设值仍然存在
- 侧边栏显示相同的预设值

## 故障排除

### 问题：侧边栏不显示

**解决方案：**
1. 检查扩展是否已启用（`chrome://extensions`）
2. 检查浏览器控制台是否有错误（F12 → Console）
3. 尝试刷新网页
4. 尝试重新加载扩展

### 问题：填充不工作

**解决方案：**
1. 确保输入框已获得焦点（有光标）
2. 确保预设值已在选项页面中添加
3. 检查浏览器控制台是否有错误
4. 尝试在不同的网页上测试

### 问题：选项页面不显示

**解决方案：**
1. 检查 `dist/options.html` 是否存在
2. 检查 `dist/options.js` 是否存在
3. 尝试重新构建项目（`npm run build`）
4. 尝试重新加载扩展

## 性能测试

### 测试侧边栏响应速度

1. 打开浏览器开发者工具（F12）
2. 切换到 Performance 标签
3. 开始录制
4. 将鼠标移动到右侧边缘，调出侧边栏
5. 停止录制
6. 观察性能指标

**预期结果：**
- 侧边栏滑出动画流畅
- 没有明显的卡顿或延迟

## 提交反馈

如果发现任何问题或有改进建议，请提交 Issue 或 Pull Request。

